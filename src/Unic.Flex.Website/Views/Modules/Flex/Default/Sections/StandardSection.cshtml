@using System.Web.Mvc.Html
@using Unic.Flex.Presentation
@model Unic.Flex.Model.ViewModel.Sections.StandardSectionViewModel

@if (string.IsNullOrWhiteSpace(Model.Title))
{
    <ul>
        @for(int i=0; i<Model.Fields.Count; i++)
        {
            @Html.FlexComponent(m => m.Fields[i])
        }
    </ul>
}
else
{
    var describedBy = !Model.DisableFieldset && Model.Tooltip.ShowTooltip ? string.Format("aria-describedby=\"{0}_Tooltip\"", Html.IdForModel()) : string.Empty;
    
    <fieldset @Html.Raw(describedBy)>
        <legend class="@string.Format("{0}", Model.DisableFieldset ? "visuallyhidden" : string.Empty)">@Model.Title</legend>
        
        @if (!Model.DisableFieldset)
        {
            @Html.FlexComponent(model => model.Tooltip)
        }

        <ul>
            @for(int i=0; i<Model.Fields.Count; i++)
            {
                @Html.FlexComponent(m => m.Fields[i])
            }
        </ul>

    </fieldset> 
}